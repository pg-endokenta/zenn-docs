---
title: "Django REST frameworkã§CORSã®è¨­å®šã‚’è¡Œã†æ–¹æ³•"
emoji: "ğŸ‘»"
type: "tech"
topics:
  - "django"
  - "cors"
  - "drf"
published: true
published_at: "2024-09-28 02:46"
---

## CORSã‚’ç°¡å˜ã«èª¬æ˜
CORSã‚’ç°¡å˜ã«èª¬æ˜ã™ã‚‹ã¨ï¼Œã€Œã©ã“ã‹ã‚‰ãªã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã‚‚è‰¯ã„ã‹ã€ã‚’è¨­å®šã™ã‚‹ã‚‚ã®ã§ã™ï¼

## ä»Šå›ä½¿ç”¨ã™ã‚‹ã‚‚ã®
django-cors-headerã¨ã„ã†ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ã¾ã™ï¼
ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã¯DRFã®[å…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã§ã‚‚è¨€åŠ](https://www.django-rest-framework.org/topics/ajax-csrf-cors/)ã•ã‚Œã¦ã„ã‚‹ã‚‚ã®ã§ã™ï¼
- [PyPIã®ãƒªãƒ³ã‚¯](https://pypi.org/project/django-cors-headers/)
- [GitHubã®ãƒªãƒã‚¸ãƒˆãƒª](https://github.com/adamchainz/django-cors-headers)


## Djangoã¸å°å…¥ã™ã‚‹
### 1. django-cors-headerã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
```bash
python -m pip install django-cors-headers
```
ã§django-cors-headerã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã—ã¾ã™

### 2. Djangoã®settings.pyã®INSTALLED_APPSã«è¿½è¨˜
```py
INSTALLED_APPS = [
    ...,
    "corsheaders",
    ...,
]
```

### 3. Djangoã®settings.pyã®MIDDLEWAREã«è¿½è¨˜
```py
MIDDLEWARE = [
    ...,
    "corsheaders.middleware.CorsMiddleware",
    "django.middleware.common.CommonMiddleware",
    ...,
]
```
ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ã¨ã—ã¦è¨˜è¼‰ã™ã‚‹ä½ç½®ã¯ã§ãã‚‹ã ã‘ä¸Šã®æ–¹ãŒè‰¯ã„ã§ã™ï¼
ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®ç”Ÿæˆã«é–¢ã‚ã‚‹ã‚‚ã®ã‚ˆã‚Šä¸Šã«è¨˜è¼‰ã™ã‚‹ã“ã¨ã§ï¼ŒåŠ¹æœã‚’ç™ºæ®ã§ãã¾ã™ï¼
ä¾‹ãˆã°ï¼Œ
- Djangoã®CommonMiddleware
- Whitenoiseã®WhiteNoiseMiddleware

ã‚ˆã‚Šä¸Šã«æ›¸ãå¿…è¦ãŒã‚ã‚Šã¾ã™ï¼

### 4. Djangoã®settings.pyã«CORS_ALLOWED_ORIGINSã‚’è¿½åŠ 
```py
CORS_ALLOWED_ORIGINS = [
    "https://example.com",
    "https://sub.example.com",
    "http://localhost:8080",
    "http://127.0.0.1:9000",
]
```
ã“ã“ã«è¿½åŠ ã•ã‚ŒãŸã‚ªãƒªã‚¸ãƒ³ã‹ã‚‰ã®æ¥ç¶šã¯è¨±å¯ã•ã‚Œã¾ã™ï¼

### ãã®ä»–
ãã®ä»–ã«ã‚‚
- REGEXã§è¨±å¯ã®ãƒªã‚¹ãƒˆä½œæˆã™ã‚‹
- ç‰¹å®šã®URLã«å¯¾ã—ã¦ã®ã¿è¨±å¯ã™ã‚‹

ã¨ã„ã†ã“ã¨ãŒã§ãã¾ã™ï¼
è©³ã—ãã¯[GitHubã®README](https://github.com/adamchainz/django-cors-headers/blob/main/README.rst)ã«è¨˜è¼‰ã•ã‚Œã¦ã„ã¾ã™

## å‚è€ƒ
[DRFã®corsã«ã¤ã„ã¦ã®ãƒšãƒ¼ã‚¸](https://www.django-rest-framework.org/topics/ajax-csrf-cors/)
[django-cors-headerã®GitHub](https://github.com/adamchainz/django-cors-headers)